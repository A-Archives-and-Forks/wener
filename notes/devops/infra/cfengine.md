---
title: CFEngine
---

# CFEngine

- Agent
  - cf-agent
  - cf-promises
  - cf-runagent
  - cf-know
  - cf-report
- Daemon
  - cf-execd
  - cf-serverd
  - cf-monitord

| bin           | for                                |
| ------------- | ---------------------------------- |
| cf-agent      | 连接 cf-serverd                    |
| cf-check      |
| cf-execd      | cron, 5min, 调度 cf-agent          |
| cf-key        | 生成密钥。                         |
| cf-monitord   | 监控信息采样，学习正常状态。       |
| cf-net        |
| cf-promises   | 验证 Promise，确保有效。           |
| cf-runagent   | 远程执行 cf-agent                  |
| cf-secret     |
| cf-serverd    | 分发 policy & data                 |
| cf-support    |
| cf-upgrade    |
| rpmvercmp     |
| ---           |
| ~~cf-know~~   | 知识信息模型，构建和分析知识网络。 |
| ~~cf-report~~ | 信息提取，显示为可读。             |
| cf-hub        |
| cf-net        |
| cf-reactor    |

- https://docs.cfengine.com/docs/master/reference-components.html
- promise
  - a statement, written in plain text using the CFEngine language, that describes the desired state of a system.
- policy
  - a collection of one or more related promises, which is executed every time the cf-agent runs.

```bash
# https://pkgs.alpinelinux.org/contents?branch=edge&name=cfengine&arch=x86_64&repo=community
apk add cfengine cfengine-masterfiles

rsync -a /var/lib/cfengine/masterfiles/ /var/lib/cfengine/inputs/

# 5308/tcp, 44244/udp
cf-serverd --no-fork --verbose


cf-agent --bootstrap --policy-server 172.16.100.134
```

- /var/lib/cfengine
- /var/cfengine/

---

- /masterfiles
  - Policy repository
- /inputs
  - Cached policy repository  on CFEngine client
- /outputs
  - Directory where cf-agent creates its output files.
- /ppkeys
  - Directory used to store encrypted public/private keys for CFEngine client/server network communications.
- /reports
  - Directory used to store reports generated by cf-report .
- /lib
  - Directory to store shared objects and dependencies that are in the bundled packages.
